"use strict";let roomPopup=document.querySelector(".one-room__popup");if(roomPopup){let e=document.querySelectorAll(".one-room__one-image"),t=roomPopup.querySelector("img");function showPopup(){t.src=event.target.src,roomPopup.classList.add("one-room__popup_visible")}e.forEach((function(e,t,i){e.addEventListener("click",showPopup)}))}function Sim(e){this.roomName=e,this.sldrRoot=document.querySelector("."+this.roomName),this.buttonsBlock=this.sldrRoot.querySelector(".rooms__buttons"),this.sldrList=this.sldrRoot.querySelector(".slimSlider__list"),this.sldrElements=this.sldrList.querySelectorAll(".slimSlider__element"),this.elemCount=this.sldrElements.length,this.imgWidths=[],this.currentElement=0,this.autoScroll,this.removedElem,this.startOffset="-600px";for(let e=0;e<this.sldrElements.length;e++)this.imgWidths.push(this.sldrElements[e].offsetWidth);this.leftArrow=this.buttonsBlock.querySelector(".arrowLeft"),this.rightArrow=this.buttonsBlock.querySelector(".arrowRight"),this.options={loop:!0,auto:!0,interval:3e3,arrows:!0,step:1},Sim.initialize(this)}function HideSubmenu(e){this.body=document.querySelector("body"),this.activeButton=document.querySelector("."+e),this.myBlock=document.getElementById(""+e),this.timeVar="",HideSubmenu.initialize(this)}Sim.prototype.elemPrev=function(){this.sldrList.style.transition="all ease-in-out 1s",this.currentElement<0&&(this.currentElement=this.elemCount-1);let e=this.currentElement-1<0?this.elemCount-1:this.currentElement-1,t=-parseInt(this.startOffset)-this.imgWidths[e];console.log(t),this.sldrList.style.left="-"+t+"px",this.currentElement-=this.options.step,this.jumpBack()},Sim.prototype.jumpBack=function(){let e=this;this.removedElem=document.querySelector(`.${this.roomName} .slimSlider__element:last-child`);let t=function(){e.sldrList.style.transition="none",e.sldrList.style.left=e.startOffset,e.removedElem.remove(),e.sldrList.prepend(e.removedElem),e.sldrList.removeEventListener("transitionend",t)};this.sldrList.addEventListener("transitionend",t)},Sim.prototype.elemNext=function(){this.sldrList.style.transition="all ease-in-out 1s",this.currentElement>=this.elemCount&&(this.currentElement=0);let e=-parseInt(this.startOffset)+this.imgWidths[this.currentElement];this.sldrList.style.left="-"+e+"px",this.currentElement+=this.options.step,this.jumpForv()},Sim.prototype.jumpForv=function(){let e=this;this.removedElem=document.querySelector(`.${this.roomName} .slimSlider__element`);let t=function(){e.sldrList.style.transition="none",e.sldrList.style.left=e.startOffset,e.removedElem.remove(),e.sldrList.append(e.removedElem),e.sldrList.removeEventListener("transitionend",t)};this.sldrList.addEventListener("transitionend",t)},Sim.initialize=function(e){let t=i();function i(){return(new Date).getTime()}function n(){e.autoScroll=setInterval((function(){let n=i();n-t+10>e.options.interval&&(t=n,e.elemNext())}),e.options.interval)}n(),e.buttonsBlock.addEventListener("mouseenter",(function(){clearInterval(e.autoScroll)})),e.buttonsBlock.addEventListener("mouseleave",(function(){n()})),e.leftArrow.addEventListener("click",(function(){let n=i();n-t>1100&&(t=n,e.elemNext())})),e.rightArrow.addEventListener("click",(function(){let n=i();n-t>1100&&(t=n,e.elemPrev())}))},window.onload=function(){let e=document.querySelectorAll(".rooms__room");for(let t=0;t<e.length;t++)new Sim(e[t].classList[1])},HideSubmenu.initialize=function(e){e.activeButton.onclick=function(){"visible"==e.myBlock.style.visibility?e.myBlock.style="visibility: hidden":(e.myBlock.style="visibility: visible",e.timeVar=1)},e.body.onclick=function(){e.timeVar||(e.myBlock.style="visibility: hidden"),e.timeVar&&setTimeout((function(){e.timeVar=""}),100)}};let menuItems=document.querySelectorAll(".toggleMenu");for(let e=0;e<menuItems.length;e++){new HideSubmenu(menuItems[e].classList[1])}let showGalleryButton=document.querySelector(".one-room__button");if(showGalleryButton){let e=document.querySelector(".one-room__images");showGalleryButton.addEventListener("click",(function(){e.classList.toggle("one-room__images_fully-previewed"),"Показать все фотографии"==event.target.innerHTML?event.target.innerHTML="Скрыть фотографии":event.target.innerHTML="Показать все фотографии"}))}if(document.getElementById("bigSlider")){let e=new XMLHttpRequest;e.open("GET","./slider.php?bigSlider"),e.responseType="json",e.send(),e.onload=function(){if(200==e.status){slideThem(e.response)}};let t,i,n,s=0,o=!0,l=document.getElementById("bigSliderPause"),r=document.getElementById("bigSliderNext"),d=document.getElementById("bigSliderPrevious");function slideThem(e){setPics(e),i=document.querySelectorAll("#bigSlider img"),setDots(i.length),t=setInterval(nextSlide,4e3)}function setPics(e){let t=document.getElementById("bigSlider");document.createElement("img");e.map((function(e){return"./src/bigSlider/"+e})).forEach((function(e,i,n){let s=document.createElement("img");s.setAttribute("src",e),s.setAttribute("data-slide-img",""+i),i||s.classList.add("showing"),t.append(s)}))}function nextSlide(){goToSlide(s+1)}function previousSlide(){goToSlide(s-1)}function goToSlide(e){i[s].className="",n[s].className="dot",s=(e+i.length)%i.length,i[s].className="showing",n[s].className="dot showing"}function pauseSlideshow(){l.innerHTML='<i class="fa fa-play fa-4x" aria-hidden="true"></i>',o=!1,clearInterval(t)}function playSlideshow(){l.innerHTML='<i class="fa fa-pause fa-4x" aria-hidden="true">',o=!0,t=setInterval(nextSlide,3e3)}function setDots(e){let t="",i=document.querySelector("#bigSlider .bigSlider__dots");for(let i=0;i<e;i++)t+=i?`<span class="dot" data-slide = "${i}"></span>`:`<span class="dot showing" data-slide = "${i}"></span>`;i.innerHTML=t,n=document.querySelectorAll("span.dot");for(let t=0;t<e;t++)n[t].addEventListener("click",(function(e){let t=e.target.dataset.slide;document.querySelector("#bigSlider .showing").dataset.slideImg!=t&&goToSlide(parseInt(t))}))}l.onclick=function(){o?pauseSlideshow():playSlideshow()},r.onclick=function(){pauseSlideshow(),nextSlide()},d.onclick=function(){pauseSlideshow(),previousSlide()}}